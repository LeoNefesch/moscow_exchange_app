# moscow_exchange_app
Перед вами приложение для выгрузки данных с Информационно-статистического 
сервера Московской Биржи.
Приложение написано с применением архитектуры REST.

 **Стэк технологий:**
 - Python 3.11.6;
 - Django 4.2.7;
 - djangorestframework 3.15.2;
 - Docker;
 - PostgreSQL;
 - requests;
 - WSL

### Как запустить проект:
При использовании IDE PyCharm клонирование репозитория, установка виртуального окружения и зависимостей выполняется
посредством интерфейса IDE. При использовании IDE VSCode и WSL потребуется выполнить следующие команды
(ниже приводятся команды для Linux):

- Клонировать репозиторий:

```
git clone git@github.com:LeoNefesch/moscow_exchange_app.git
```
- Зайти в директорию, установить и активировать виртуальное окружение:
```
cd moscow_exchange_app
```
```
python3 -m venv venv
```

```
source venv/bin/activate
```
- Установить зависимости из файла requirements.txt:
```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```
- В головной директории проекта создать файл `.env`.
Файл `.env` должен содержать следующие переменные окружения:
```
DEBUG=True  # False для продакшна
SECRET_KEY=сгенерируй, например, здесь: https://djecrety.ir/
ALLOWED_HOSTS=127.0.0.1,localhost
SECURITIES_URL=<эндпойнт для получения информации о ценных бумагах>
HISTORY_URL=<эндпойнт для получения истории торгов за произвольную дату>
PG_USER=<пользователь_БД>
PG_PASSWORD=<пароль_пользователя_БД>
PG_DATABASE=<имя_БД>
PG_HOST=localhost
PG_PORT=5433
```
### Работа с БД приложения
- Через WSL из директории с `docker-compose.yml` запустить контейнер с Postgresql:
```
sudo docker-compose up -d
```
_Необходимые команды для работы с docker compose можно найти [здесь](docker_shortcuts.md)_.

- Находясь в головной директории (в папке с файлом manage.py), выполнить миграции:
```
python3 manage.py migrate
```
### Запустить проект:
```
python3 manage.py runserver
```
### Загрузка данных в БД:
- Для загрузки данных из Московской биржи в БД приложения на главной странице нажмите на кнопку `Загрузить данные`.

### Выполнение CRUD-операций с объектами БД
- Перейдите в браузере по адресу `http://127.0.0.1:8000/docs`.
